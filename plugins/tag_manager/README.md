# TagManager 插件

这是一个用于管理微信联系人标签的插件，支持标签管理、群发消息和定时群发等功能。

## 功能特点

- 标签管理：创建、删除、查看标签，为好友添加/删除标签
- 群发消息：向特定标签的好友群发消息
- 定时群发：设置定时任务，在指定时间向标签好友发送消息
- 任务管理：查看和删除定时发送任务

## 配置说明

1. 复制 `config.json.template` 为 `config.json`
2. 在配置文件中设置以下内容：
```json
{
    "admin_users": ["管理员昵称1", "管理员昵称2"],  // 可以使用管理命令的用户昵称列表
    "enabled_tags": ["重要客户", "潜在客户"],      // 已启用的标签列表
    "auto_reply": {                              // 标签自动回复配置
        "重要客户": "您好，感谢您的咨询...",
        "潜在客户": "您好，欢迎了解我们的产品..."
    },
    "scheduled_tasks": []                        // 定时任务列表（自动维护，无需手动修改）
}
```

## 使用方法

### 标签管理
```
$标签管理 标签列表                     # 查看所有标签
$标签管理 添加标签 [标签名]            # 创建新标签
$标签管理 删除标签 [标签名]            # 删除标签
$标签管理 查看 [标签名]               # 查看标签下的所有好友
$标签管理 添加好友 [标签名] [好友昵称]  # 为好友添加标签
$标签管理 删除好友 [标签名] [好友昵称]  # 删除好友的标签
```

### 群发消息
```
$群发 [标签名] [消息内容]              # 立即向指定标签的所有好友发送消息
```

### 定时群发
```
$定时群发 [标签名] [时间(HH:MM)] [消息内容]  # 设置定时群发任务
```

### 任务管理
```
$查看任务                            # 查看所有定时群发任务
$删除任务 [任务ID]                   # 删除指定的定时任务
```

## 使用示例

1. 创建新标签并添加好友：
```
$标签管理 添加标签 VIP客户
$标签管理 添加好友 VIP客户 张三
```

2. 向VIP客户群发消息：
```
$群发 VIP客户 感谢您一直以来的支持，现有新产品上线，诚邀您体验！
```

3. 设置定时群发任务：
```
$定时群发 VIP客户 09:00 早上好，今日特惠活动即将开始！
```

## 注意事项

1. 只有在配置文件中设置的管理员才能使用管理命令
2. 群发消息时请注意频率，避免触发微信的安全机制
3. 定时任务的时间格式必须是24小时制（HH:MM）
4. 建议定期检查和清理无效的定时任务

## 错误排查

如果遇到问题，请检查：
1. 配置文件格式是否正确
2. 管理员昵称是否配置正确
3. 使用的标签是否存在
4. 查看日志文件了解详细错误信息

## 更新日志

### v0.1
- 实现基础的标签管理功能
- 支持群发消息
- 支持定时群发任务
- 添加管理员权限控制